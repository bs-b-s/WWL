```
저 철도보다는 내가 더 행복하다
긍살하깅
```

## 😏 Context Switching 살펴보기

CPU는 한 번에 하나의 task만 실행할 수 있고, Context Switching을 통해 빠른 속도로 task를 바꿔가며 실행하기 때문에, 사용자에게는 application을 동시에 여러 개 쓰는 것처럼 인식된다.

이때, `Context`는 CPU가 해당 task를 실행하기 위한 정보이다. 이는 Control Block에 저장된다.

> Process이면 PCB, Thread이면 TCB

`Context Switching`은 멀티 태스킹(멀티 프로세스, 멀티 스레드)을 할 때 필요하며, **CPU가 현재 진행하고 있는 task의 Control Block을 저장하고 다음 진행할 Control Block을 읽어 적용하는 과정**이다.

Context Switching이 일어날 때, 해당 CPU는 아무 일도 하지 못한다. 따라서 Context Switching이 잦아지면 오버헤드가 발생해 효율이 떨어진다.

<br>

## 👫 멀티 프로세스

**하나의 application**을 **여러 개의 process**로 구성하고, **각 process가 하나의 task**를 처리하도록 하는 것이다.

**👍 장점**

- 여러 개의 자식 프로세스 중 하나의 프로세스가 죽더라도 다른 프로세스에 영향을 주지 않는다. (→ 안정성 긋)

**👎 단점**

- 프로세스는 각각 독립된 메모리 공간을 할당받는다. 따라서 공유하는 메모리가 없어, Context Switching이 발생하면 cache에 있는 모든 데이터를 모두 초기화하고, 다시 cache 정보를 불러와야 한다.
- Context Switching을 하며, cache 메모리 초기화 등 무거운 작업을 해서 많은 시간이 소모되어 오버헤드가 발생한다.
- 프로세스 사이에서 통신하기 힘들다. 독립된 메모리 공간을 할당 받았기 때문에, 하나의 프로그램에 속하는 프로세스들 사이의 변수를 공유할 수 없다.

<br>

## 👧‍👦 멀티 스레드

**하나의 process**를 **여러 개의 스레드**로 구성하고, **각 스레드가 하나의 task**를 처리하도록 하는 것이다.

**👍 장점**

- process를 생성하여 자원을 할당하는 시스템 콜이 줄어 자원을 효율적으로 관리할 수 있다.
- 스레드는 스택 영역을 제외한 메모리 영역을 공유하기 때문에 서로 데이터를 주고 받는 것이 간단하다.
- 스레드 사이 작업량이 작아 Context Switching이 빠르다. (→ cache를 비울 필요가 없고, stack 영역만 처리하기 때문)

**👎 단점**

- 자원을 공유하기 때문에 동기화 문제가 발생할 수 있다.
- 주의 깊은 설계가 필요하고, 디버깅이 어렵다.
    > 불필요한 부분까지 동기화하면, 대기 시간 때문에 성능 저하가 발생한다.
- 하나의 스레드에 문제가 생기면 전체 프로세스가 영향을 받는다.
- 단일 프로세스 시스템의 경우 효과를 기대하기 어렵다.

```
멀티 스레드를 더 많이 쓴다. 끗.
```
